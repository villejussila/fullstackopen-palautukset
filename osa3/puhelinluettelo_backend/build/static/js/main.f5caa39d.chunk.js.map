{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/phoneBookService.js","App.js","index.js"],"names":["Filter","onChange","value","PersonForm","onSubmit","onChangeNewName","onChangeNewNumber","newName","newNumber","type","Persons","persons","filterByValue","onClick","map","person","name","toLowerCase","includes","number","id","Notification","message","isError","className","BASE_URL","axios","get","then","response","data","newPerson","post","delete","updatePerson","put","App","useState","setPersons","setNewName","setNewNumber","setFilterByValue","notification","setNotification","setIsError","refreshPersons","setRefreshPersons","useEffect","phoneBookService","initialPersons","doesPersonNameAlreadyExist","personName","newNameCopy","getPersonId","personsLowerCase","find","updatePhoneBookPersonById","returnedPerson","setTimeout","catch","error","createNewPhoneBookPerson","e","target","preventDefault","window","confirm","filter","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f5caa39d.chunk.js","sourcesContent":["const Filter = ({ onChange, value }) => {\r\n  return (\r\n    <div>\r\n      filter shown with <input value={value} onChange={onChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","const PersonForm = ({\r\n  onSubmit,\r\n  onChangeNewName,\r\n  onChangeNewNumber,\r\n  newName,\r\n  newNumber,\r\n}) => {\r\n  return (\r\n    <>\r\n      <form onSubmit={onSubmit}>\r\n        <div>\r\n          name: <input value={newName} onChange={onChangeNewName} />\r\n        </div>\r\n        <div>\r\n          number: <input value={newNumber} onChange={onChangeNewNumber} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">Add</button>\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ persons, filterByValue, onClick }) => {\r\n  return (\r\n    <div>\r\n      {persons.map((person) => (\r\n        <div key={person.name}>\r\n          {filterByValue ? (\r\n            person.name.toLowerCase().includes(filterByValue.toLowerCase()) ? (\r\n              <>\r\n                {person.name} {person.number}\r\n                <button onClick={() => onClick(person.id)}>delete</button>\r\n              </>\r\n            ) : null\r\n          ) : (\r\n            <>\r\n              {person.name} {person.number}\r\n              <button onClick={() => onClick(person.id)}>delete</button>\r\n            </>\r\n          )}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message, isError }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n  return <div className={isError ? \"error\" : \"notification\"}>{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import axios from \"axios\";\r\nconst BASE_URL = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(BASE_URL);\r\n  return request.then((response) => response.data);\r\n};\r\nconst create = (newPerson) => {\r\n  const request = axios.post(BASE_URL, newPerson);\r\n  return request.then((response) => response.data);\r\n};\r\nconst deletePersonById = (id) => {\r\n  const request = axios.delete(`${BASE_URL}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\nconst update = (id, updatePerson) => {\r\n  const request = axios.put(`${BASE_URL}/${id}`, updatePerson);\r\n  return request.then((response) => response.data);\r\n};\r\n/* eslint import/no-anonymous-default-export: [2, {\"allowObject\": true}] */\r\nexport default {\r\n  getAll,\r\n  create,\r\n  deletePersonById,\r\n  update,\r\n};\r\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Notification from \"./components/Notification\";\nimport phoneBookService from \"./services/phoneBookService\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterByValue, setFilterByValue] = useState(\"\");\n  const [notification, setNotification] = useState(null);\n  const [isError, setIsError] = useState(false);\n  const [refreshPersons, setRefreshPersons] = useState(false);\n\n  useEffect(() => {\n    phoneBookService.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  useEffect(() => {\n    if (!refreshPersons) return;\n    phoneBookService.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n    });\n    return () => setRefreshPersons(false);\n  }, [refreshPersons]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (doesPersonNameAlreadyExist(persons, newName)) {\n      if (\n        window.confirm(\n          `${newName} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        const id = getPersonId(persons, newName);\n        updatePhoneBookPersonById(id);\n      }\n      return;\n    }\n    createNewPhoneBookPerson();\n  };\n\n  const doesPersonNameAlreadyExist = (persons, personName) => {\n    const namesLowerCase = persons.map((person) => person.name.toLowerCase());\n    let newNameCopy = personName;\n    return namesLowerCase.includes(newNameCopy.toLowerCase());\n  };\n  const getPersonId = (persons, personName) => {\n    const personsLowerCase = persons.map((person) => {\n      return { ...person, name: person.name.toLowerCase() };\n    });\n    let newNameCopy = personName;\n    const { id } = personsLowerCase.find(\n      (person) => person.name === newNameCopy.toLowerCase()\n    );\n    return id;\n  };\n  const updatePhoneBookPersonById = (id) => {\n    setIsError(false);\n    phoneBookService\n      .update(id, { name: newName, number: newNumber })\n      .then((returnedPerson) => {\n        if (!returnedPerson) setIsError(true);\n        setPersons(\n          persons.map((person) => (person.id !== id ? person : returnedPerson))\n        );\n      })\n      .then(() => {\n        setNewName(\"\");\n        setNewNumber(\"\");\n        setNotification(`Updated ${newName}`);\n        setTimeout(() => {\n          setNotification(null);\n        }, 5000);\n      })\n      .catch((error) => {\n        setIsError(true);\n        setNewName(\"\");\n        setNewNumber(\"\");\n        setRefreshPersons(true);\n        setNotification(\n          `Information of ${newName} has already been removed from server`\n        );\n        setTimeout(() => {\n          setNotification(null);\n          setIsError(false);\n        }, 5000);\n        return;\n      });\n  };\n  const createNewPhoneBookPerson = () => {\n    phoneBookService\n      .create({ name: newName, number: newNumber })\n      .then((returnedPerson) => {\n        setPersons((persons) => [...persons, returnedPerson]);\n        setIsError(false);\n        setNewName(\"\");\n        setNewNumber(\"\");\n        setNotification(`Added ${newName}`);\n      })\n      .catch((error) => {\n        setNotification(error.response.data.error);\n        setIsError(true);\n      });\n    setTimeout(() => {\n      setNotification(null);\n      setIsError(false);\n    }, 5000);\n  };\n  const handleFilterShown = (e) => {\n    setFilterByValue(e.target.value);\n  };\n  const handleAddNumber = (e) => {\n    setNewNumber(e.target.value);\n  };\n  const handleAddName = (e) => {\n    setNewName(e.target.value);\n  };\n  const handleDeletePerson = (id) => {\n    const { name } = persons.find((person) => person.id === id);\n    if (name && window.confirm(`Delete ${name}?`))\n      phoneBookService\n        .deletePersonById(id)\n        .then(setPersons(persons.filter((person) => person.id !== id)));\n    setNotification(`Deleted ${name}`);\n    setTimeout(() => {\n      setNotification(null);\n    }, 5000);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification} isError={isError} />\n      <Filter value={filterByValue} onChange={handleFilterShown} />\n      <h3>Add new</h3>\n      <PersonForm\n        onSubmit={handleSubmit}\n        newName={newName}\n        newNumber={newNumber}\n        onChangeNewName={handleAddName}\n        onChangeNewNumber={handleAddNumber}\n      />\n      <h3>Numbers</h3>\n      <Persons\n        persons={persons}\n        filterByValue={filterByValue}\n        onClick={handleDeletePerson}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}